<div id="giscus-comments"></div>
<script src="https://giscus.app/client.js"
  data-repo="17356085/17356085.github.io"
  data-repo-id="R_kgDOPcYMPg"
  data-category="Announcements"
  data-category-id="DIC_kwDOPcYMPs4CuH1t"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async>
</script>

<script is:inline>
  // 你站点的暗色主题 class，通常是 'dark'
  const DARK_CLASS = 'dark';
  // giscus 支持的主题名
  const LIGHT_THEME = 'light';
  const DARK_THEME = 'dark';

  function setGiscusTheme(theme) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage(
      {
        giscus: {
          setConfig: {
            theme: theme,
          },
        },
      },
      'https://giscus.app'
    );
  }

  // 检查当前主题
  function getCurrentTheme() {
    return document.documentElement.classList.contains(DARK_CLASS) ? DARK_THEME : LIGHT_THEME;
  }

  // 初始设置
  window.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => setGiscusTheme(getCurrentTheme()), 500);
  });

  // 监听主题切换（假设你的主题切换会修改 <html> 的 class）
  const observer = new MutationObserver(() => {
    setGiscusTheme(getCurrentTheme());
  });
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
</script>